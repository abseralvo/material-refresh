(function(){"use strict";!function(){function e(e){if(e=e||{},h=K(e.scrollEl||(F?h:document)),M=e.onBegin,N=e.onEnd,C=e.maxTime||C,j=K(e.nav||j),K("#muirefresh")||t(),p=K("#muiRefresh"),m=K(p,".mui-spinner-wrapper"),f=K(p,".mui-arrow-wrapper"),y=K(p,".mui-arrow-main"),!u()){p.classList.add("mui-refresh-nav"),H=j.clientHeight+20;var n;if(n=j.getBoundingClientRect()){var i=n.top+document.body.scrollTop;n.left+document.body.scrollLeft;Y=i,"fixed"!==j.style.position&&(H+=Y),p.style.top=Y+"px"}var s=window.getComputedStyle(j).zIndex;p.style.zIndex=Math.max(1,parseInt(s)-1)}e.index&&(p.style.zIndex=~~e.index),e.top&&(p.style.top=e.top),e.theme?p.classList.add(e.theme):p.classList.add(x),p.classList.add(g),e.freeze||d()}function t(){document.body.insertAdjacentHTML("beforeend",G)}function n(e){F&&h==document.body?J.top=window.scrollY:h!=document?J.top=h.scrollTop:J.top=(document.documentElement||document.body.parentNode||document.body).scrollTop,J.top>0||T||(v=H+E,p.style.display="",e.touches[0]&&(J.x1=e.touches[0].pageX,R=J.y1=e.touches[0].pageY))}function i(e){var t,n,i=(new Date).getTime();if(!(J.top>0||T)&&e.touches&&1===e.touches.length){if(t=e.touches[0],J.x2=t.pageX,J.y2=t.pageY,n=J.y2-J.y1,J.y2-R+B>0){if(e.preventDefault(),i-q<90)return;if(!(v<H-Y+z))return void l();v+=n,r(v)}J.y1=t.pageY,q=i}}function s(e){J.top>0||T||(e.preventDefault(),v>H-Y+D?l():o())}function o(){var e=H+E;u()?(p.style.top=e+"px",p.style.webkitTransform="scale(0)"):p.style.top=Y+"px",setTimeout(function(){T||(p.style.opacity=0,p.style.display="none")},300)}function r(e){var t=40,n=e/t>1?1:e/t<0?0:e/t,i=H+E+e;u()&&(p.style.webkitTransform="scale("+n+")"),p.style.opacity=n,p.style.top=i+"px",y.style.webkitTransform="rotate("+-(3*e)+"deg)"}function l(){if(T=!0,b&&"function"==typeof A?A():"function"==typeof M&&M(),p.style.opacity=1,b)p.classList.add(g),p.style.webkitTransform="scale(1)";else{var e=H+k-20;u()||(e+=I),p.style.top=e+"px"}f.style.display="none",m.style.display="",X=setTimeout(a,C)}function a(){L=!0,p.classList.add(w),m.style.display="none",setTimeout(function(){p.classList.remove(w),p.style.display="none",o(),f.style.display="",T=!1,L=!1,b&&"function"==typeof S?S():"function"==typeof N&&N(),b=!1},500)}function u(){return!j}function d(){h.addEventListener("touchstart",n),h.addEventListener("touchmove",i),h.addEventListener("touchend",s)}function c(){h.removeEventListener("touchstart",n),h.removeEventListener("touchmove",i),h.removeEventListener("touchend",s)}var p,m,f,y,v,h=document.body,w="mui-refresh-noshow",g="mui-refresh-main-animat",x="mui-blue-theme",T=!1,L=!1,b=!1,E=-85,k=0,z=65,D=-25,I=20,R=0,Y=0,B=2,C=6e3,H=60,M=null,A=null,N=null,S=null,X=null,j="",q=(new Date).getTime(),F=/ip(hone|ad|od)/i.test(navigator.userAgent),G='<div id="muiRefresh" class="mui-refresh-main">            <div class="mui-refresh-wrapper ">                <div class="mui-arrow-wrapper">                    <div class="mui-arrow-main"></div>                </div>                <div class="mui-spinner-wrapper" style="display:none;">                    <div class="mui-spinner-main" >                        <div class="mui-spinner-left">                            <div class="mui-half-circle"></div>                        </div>                        <div class="mui-spinner-right">                            <div class="mui-half-circle"></div>                        </div>                    </div>                </div>            </div>        </div>',J={top:0,x1:0,x2:0,y1:0,y2:0},K=function(){var e,t;return 1===arguments.length?(t=arguments[0],e=document):(e=arguments[0],t=arguments[1]),t&&"string"==typeof t?e.querySelector(t):t instanceof HTMLElement?t:null};e.resolve=function(){!L&&X&&(clearTimeout(X),X=null,a())},e.destroy=function(){c(),p.parentNode.removeChild(p)},e.refresh=function(e){if(!T){var t=H+k-20;T=!0,b=!0,e=e||{},A=e.onBegin,S=e.onEnd,u()||(t+=I),p.style.display="",p.classList.remove(g),p.style.top=t+"px",p.style.webkitTransform="scale(0.01)",setTimeout(l,60)}},e.unbindEvents=function(){c()},e.bindEvents=function(){d()},window.mRefresh=e}()}).call(this);